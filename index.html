<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Saylani Mass IT Training</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
* { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: 'Poppins', sans-serif;
  background: #f0f4ff;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 30px 16px;
}

h1 {
  font-size: 24px;
  font-weight: 700;
  color: #1a1a2e;
  text-align: center;
  margin-bottom: 6px;
}
h1 span { color: #1a56db; }

.subtitle {
  font-size: 13px;
  color: #6b7280;
  text-align: center;
  margin-bottom: 24px;
}

.chat-card {
  width: 680px;
  max-width: 100%;
  background: #fff;
  border-radius: 20px;
  box-shadow: 0 4px 24px rgba(0,0,0,0.09);
  display: flex;
  flex-direction: column;
  height: 580px;
  overflow: hidden;
}

/* top bar */
.topbar {
  background: #1a56db;
  padding: 14px 20px;
  display: flex;
  align-items: center;
  gap: 10px;
  flex-shrink: 0;
}
.bot-icon {
  width: 36px; height: 36px;
  border-radius: 50%;
  background: rgba(255,255,255,0.2);
  display: flex; align-items: center; justify-content: center;
  font-size: 18px;
}
.bot-name { font-size: 14px; font-weight: 600; color: #fff; }
.bot-status {
  font-size: 11px; color: rgba(255,255,255,0.75);
  display: flex; align-items: center; gap: 5px;
}
.dot {
  width: 6px; height: 6px; border-radius: 50%;
  background: #4ade80;
  animation: blink 2s infinite;
}
@keyframes blink { 0%,100%{opacity:1} 50%{opacity:0.3} }

.clear-btn {
  margin-left: auto;
  background: rgba(255,255,255,0.15);
  border: none; border-radius: 8px;
  padding: 6px 14px; color: #fff;
  font-family: 'Poppins', sans-serif;
  font-size: 12px; cursor: pointer;
}
.clear-btn:hover { background: rgba(255,255,255,0.25); }

/* messages */
.messages {
  flex: 1;
  overflow-y: auto;
  padding: 20px;
  display: flex;
  flex-direction: column;
  gap: 14px;
}
.messages::-webkit-scrollbar { width: 4px; }
.messages::-webkit-scrollbar-thumb { background: #e5e7eb; border-radius: 4px; }

.welcome {
  margin: auto;
  text-align: center;
  color: #6b7280;
  font-size: 14px;
}
.welcome strong { display: block; font-size: 16px; color: #374151; margin-bottom: 4px; }

/* rows */
.row { display: flex; align-items: flex-end; gap: 8px; animation: pop .2s ease; }
.row.user { flex-direction: row-reverse; }
@keyframes pop { from{opacity:0;transform:translateY(6px)} to{opacity:1;transform:translateY(0)} }

.av {
  width: 30px; height: 30px; border-radius: 50%;
  flex-shrink: 0;
  display: flex; align-items: center; justify-content: center;
  font-size: 11px; font-weight: 700;
}
.row.bot  .av { background: #dbeafe; color: #1a56db; }
.row.user .av { background: #1a56db; color: #fff; }

.col { display: flex; flex-direction: column; max-width: 70%; }
.row.user .col { align-items: flex-end; }

.bubble {
  padding: 10px 14px;
  border-radius: 16px;
  font-size: 14px;
  line-height: 1.55;
  word-break: break-word;
}
.row.bot  .bubble { background: #f3f4f6; color: #1f2937; border-bottom-left-radius: 4px; }
.row.user .bubble { background: #1a56db; color: #fff; border-bottom-right-radius: 4px; }

.msg-time { font-size: 10px; color: #9ca3af; margin-top: 4px; padding: 0 2px; }
.row.user .msg-time { text-align: right; }

/* typing */
.typing { display: flex; gap: 5px; padding: 10px 14px; align-items: center; }
.typing span {
  width: 7px; height: 7px; border-radius: 50%; background: #9ca3af;
  animation: bounce 1.1s infinite ease-in-out;
}
.typing span:nth-child(2) { animation-delay: .18s; }
.typing span:nth-child(3) { animation-delay: .36s; }
@keyframes bounce { 0%,60%,100%{transform:translateY(0)} 30%{transform:translateY(-6px)} }

/* input */
.input-area {
  border-top: 1px solid #e5e7eb;
  padding: 14px 16px;
  display: flex;
  align-items: center;
  gap: 10px;
  background: #fff;
  flex-shrink: 0;
}
#userInput {
  flex: 1;
  min-width: 0;
  height: 44px;
  border: 1px solid #e5e7eb;
  border-radius: 12px;
  padding: 0 16px;
  font-family: 'Poppins', sans-serif;
  font-size: 14px;
  color: #1f2937;
  outline: none;
}
#userInput:focus { border-color: #1a56db; }
#userInput::placeholder { color: #9ca3af; }

#sendBtn {
  width: 44px; height: 44px; flex-shrink: 0;
  border-radius: 12px; background: #1a56db;
  border: none; cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  transition: background .2s;
}
#sendBtn:hover { background: #1446c0; }
#sendBtn:disabled { background: #93c5fd; cursor: not-allowed; }
</style>
</head>
<body>

<h1>Welcome To <span>Saylani Mass IT Training</span></h1>
<p class="subtitle">Ask anything â€” we're here to help you learn and grow.</p>

<div class="chat-card">

  <div class="topbar">
    <div class="bot-icon">ðŸ¤–</div>
    <div>
      <div class="bot-name">SMIT Assistant</div>
      <div class="bot-status"><span class="dot"></span> Online</div>
    </div>
    <button class="clear-btn" onclick="clearChat()">Clear</button>
  </div>

  <div class="messages" id="messages">
    <div class="welcome" id="welcomeMsg">
      <strong>ðŸ‘‹ Hello! How can I help you today?</strong>
      Type a message below to get started.
    </div>
  </div>

  <div class="input-area">
    <input type="text" id="userInput" placeholder="Type your message..." autocomplete="off" />
    <button id="sendBtn" onclick="sendMessage()">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
        <line x1="22" y1="2" x2="11" y2="13"/>
        <polygon points="22 2 15 22 11 13 2 9 22 2"/>
      </svg>
    </button>
  </div>

</div>

<script>
var API_URL    = "https://saeed123.app.n8n.cloud/webhook/493bb232-829e-4df6-839c-3eaf72fc67de";
var messagesEl = document.getElementById("messages");
var inputEl    = document.getElementById("userInput");
var sendBtn    = document.getElementById("sendBtn");
var waiting    = false;

inputEl.addEventListener("keydown", function(e) {
  if (e.key === "Enter") { e.preventDefault(); sendMessage(); }
});

function timeNow() {
  return new Date().toLocaleTimeString([], { hour: "2-digit", minute: "2-digit" });
}

function removeWelcome() {
  var w = document.getElementById("welcomeMsg");
  if (w) w.remove();
}

function addMessage(text, role) {
  removeWelcome();

  var row = document.createElement("div");
  row.className = "row " + role;

  var av = document.createElement("div");
  av.className = "av";
  av.textContent = role === "bot" ? "AI" : "You";

  var col = document.createElement("div");
  col.className = "col";

  var bubble = document.createElement("div");
  bubble.className = "bubble";
  bubble.textContent = text;

  var time = document.createElement("div");
  time.className = "msg-time";
  time.textContent = timeNow();

  col.appendChild(bubble);
  col.appendChild(time);

  if (role === "user") {
    row.appendChild(col);
  } else {
    row.appendChild(av);
    row.appendChild(col);
  }

  messagesEl.appendChild(row);
  messagesEl.scrollTop = messagesEl.scrollHeight;
}

function showTyping() {
  removeWelcome();
  var row = document.createElement("div");
  row.className = "row bot";
  row.id = "typingRow";

  var av = document.createElement("div");
  av.className = "av";
  av.textContent = "AI";

  var bubble = document.createElement("div");
  bubble.className = "bubble typing";
  bubble.innerHTML = "<span></span><span></span><span></span>";

  row.appendChild(av);
  row.appendChild(bubble);
  messagesEl.appendChild(row);
  messagesEl.scrollTop = messagesEl.scrollHeight;
}

function removeTyping() {
  var t = document.getElementById("typingRow");
  if (t) t.remove();
}

async function sendMessage() {
  var text = inputEl.value.trim();
  if (!text || waiting) return;

  waiting = true;
  sendBtn.disabled = true;
  inputEl.value = "";

  addMessage(text, "user");
  showTyping();

  try {
    var resp = await fetch(API_URL, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ userInput: text })
    });
    var data = await resp.json();
    removeTyping();
    var output = Array.isArray(data)
      ? (data[0].output || data[0].text || JSON.stringify(data[0]))
      : (data.output || data.text || JSON.stringify(data));
    addMessage(output, "bot");
  } catch(err) {
    removeTyping();
    addMessage("Sorry, couldn't reach the server. Please try again.", "bot");
  }

  waiting = false;
  sendBtn.disabled = false;
  inputEl.focus();
}

function clearChat() {
  messagesEl.innerHTML = '<div class="welcome" id="welcomeMsg"><strong>ðŸ‘‹ Hello! How can I help you today?</strong>Type a message below to get started.</div>';
}

inputEl.focus();
</script>
</body>
</html>
